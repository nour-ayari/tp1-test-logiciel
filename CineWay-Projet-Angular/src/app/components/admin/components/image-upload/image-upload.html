<div class="flex flex-col gap-4">
  @if (showLabel && label) {
    <label class="text-sm font-semibold text-white">
      {{ label }}
      @if (required) {
        <span class="text-red-400">*</span>
      }
    </label>
  }

  @if (previewUrl) {
    <div class="relative inline-block">
      <img
        [src]="previewUrl"
        alt="Preview"
        class="h-40 w-40 object-cover rounded-lg border border-[#2a3644]"
      />
      <button
        type="button"
        (click)="removeImage()"
        class="absolute top-2 right-2 p-2 bg-red-500/80 hover:bg-red-600 text-white rounded-lg transition-colors"
        title="Remove image"
      >
        <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  } @else {
    <div
      [class.drag-over]="isDragOver"
      class="border-2 border-dashed border-[#2a3644] rounded-lg p-8 text-center cursor-pointer transition-colors hover:border-[#3d99f5]"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <input
        type="file"
        accept="image/*"
        class="hidden"
        #fileInput
        (change)="onFileSelected($event)"
      />
      <svg class="mx-auto h-12 w-12 text-gray-500 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 4v16m8-8H4"
        />
      </svg>
      <p class="text-sm font-medium text-white mb-1">
        <button
          type="button"
          (click)="fileInput.click()"
          class="text-[#3d99f5] hover:underline"
        >
          Upload a file
        </button>
        or drag and drop
      </p>
      <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
    </div>
  }
</div>
